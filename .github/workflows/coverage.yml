# This workflow will run our tests, generate an lcov code coverage file,
# and send that coverage to Coveralls 

name: Code Coverage

on:
  push:
    branches-ignore: dev/*
  pull_request:

jobs:
  call_code_coverage:
    uses: yext/slapshot-reusable-workflows/.github/workflows/coverage.yml@v1
    with:
      test_script: 'git config --global user.email "slapshot@yext.com"
        && git config --global user.name "Jambo run-tests.yml"
        && npx jest --config=jest-coverage.json'
      comparison_branch: master
    secrets:
      caller_github_token: ${{ secrets.GITHUB_TOKEN }}
